Index: app/src/main/java/com/example/android_ck/khachhang/FavoriteFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.android_ck.khachhang;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.example.android_ck.R;\r\n\r\npublic class FavoriteFragment extends Fragment {\r\n    @Nullable\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.fragment_khachhang_yeuthich,container,false);\r\n        return view;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/android_ck/khachhang/FavoriteFragment.java b/app/src/main/java/com/example/android_ck/khachhang/FavoriteFragment.java
--- a/app/src/main/java/com/example/android_ck/khachhang/FavoriteFragment.java	
+++ b/app/src/main/java/com/example/android_ck/khachhang/FavoriteFragment.java	
@@ -1,21 +1,65 @@
 package com.example.android_ck.khachhang;
 
+import android.content.Intent;
+import android.database.Cursor;
 import android.os.Bundle;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
+import android.widget.Toast;
 
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
 import androidx.fragment.app.Fragment;
+import androidx.recyclerview.widget.LinearLayoutManager;
+import androidx.recyclerview.widget.RecyclerView;
 
+import com.example.android_ck.DBHelper;
 import com.example.android_ck.R;
+import com.google.android.material.floatingactionbutton.FloatingActionButton;
+
+import java.util.ArrayList;
 
 public class FavoriteFragment extends Fragment {
+    FloatingActionButton add_button;
+    RecyclerView recyclerView;
+    DBHelper myDB;
+    ArrayList<String> listtentk, listmaphim;
+    YeuThichAdapter yeuThichAdapter;
     @Nullable
     @Override
     public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
         View view = inflater.inflate(R.layout.fragment_khachhang_yeuthich,container,false);
+        add_button = view.findViewById(R.id.add_list_button);
+        recyclerView = view.findViewById(R.id.recyclerView);
+        add_button.setOnClickListener(new View.OnClickListener() {
+            @Override
+            public void onClick(View v) {
+                Intent i = new Intent(getContext(), AddActivity.class);
+                startActivity(i);
+            }
+        });
+
+        myDB = new DBHelper(getContext());
+        listtentk = new ArrayList<>();
+        listmaphim = new ArrayList<>();
+
+        storeDataInArrays();
+        yeuThichAdapter = new YeuThichAdapter(getContext(), listmaphim, listtentk);
+        recyclerView.setAdapter(yeuThichAdapter);
+        recyclerView.setLayoutManager(new LinearLayoutManager(getContext()));
         return view;
     }
+
+    void storeDataInArrays(){
+        Cursor cursor = myDB.layDuLieuBangDSYT();
+        if(cursor.getCount() == 0)
+            Toast.makeText(getContext(), "No data", Toast.LENGTH_SHORT).show();
+        else{
+            while (cursor.moveToNext()){
+                listtentk.add(cursor.getString(1));
+                listmaphim.add(cursor.getString(2));
+            }
+        }
+    }
 }
Index: app/src/main/java/com/example/android_ck/DBHelper.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.android_ck;\r\n\r\nimport android.content.ContentValues;\r\nimport android.content.Context;\r\nimport android.database.Cursor;\r\nimport android.database.sqlite.SQLiteDatabase;\r\nimport android.database.sqlite.SQLiteOpenHelper;\r\nimport android.util.Log;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.Nullable;\r\n\r\nimport com.example.android_ck.khachhang.FavoriteFragment;\r\n\r\npublic class DBHelper extends SQLiteOpenHelper {\r\n    private Context context;\r\n    public static final String DBName = \"app.db\";\r\n    public DBHelper(@Nullable Context context) {\r\n        super(context, DBName, null, 1);\r\n        this.context = context;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(SQLiteDatabase db) {\r\n        String taikhoan = \"CREATE TABLE taikhoan(\" +\r\n                \"tentaikhoan TEXT PRIMARY KEY,\" +\r\n                \"matkhau TEXT,\" +\r\n                \"quyen TEXT,\" +\r\n                \"ngaytao TEXT)\";\r\n        db.execSQL(taikhoan);\r\n\r\n        // Tạo bảng Thể loại\r\n        String theloai = \"CREATE TABLE theloai(\" +\r\n                \"matheloai INTEGER PRIMARY KEY AUTOINCREMENT,\" +\r\n                \"tentheloai TEXT)\";\r\n        db.execSQL(theloai);\r\n\r\n        // Tạo bảng Phim\r\n        String phim = \"CREATE TABLE phim(\" +\r\n                \"maphim INTEGER PRIMARY KEY AUTOINCREMENT,\" +\r\n                \"tenphim TEXT,\" +\r\n                \"anhphim BLOB,\" +\r\n                \"ngaycongchieu TEXT,\" +\r\n                \"mota TEXT,\" +\r\n                \"thoiluong TEXT,\" +\r\n                \"gia INTEGER,\" +\r\n                \"matheloai INTEGER,\" +\r\n                \"FOREIGN KEY(matheloai) REFERENCES theloai(matheloai))\";\r\n        db.execSQL(phim);\r\n\r\n        // Tạo bảng Danh sách yêu thích\r\n        String danhsachyeuthich = \"CREATE TABLE danhsachyeuthich(\" +\r\n                \"iddansach INTEGER PRIMARY KEY AUTOINCREMENT,\" +\r\n                \"tentaikhoan TEXT,\" +\r\n                \"maphim INTEGER,\" +\r\n                \"FOREIGN KEY(tentaikhoan) REFERENCES taikhoan(tentaikhoan),\" +\r\n                \"FOREIGN KEY(maphim) REFERENCES phim(maphim))\";\r\n        db.execSQL(danhsachyeuthich);\r\n\r\n        // Tạo bảng Hóa đơn\r\n        String hoadon = \"CREATE TABLE hoadon(\" +\r\n                \"idhoadon INTEGER PRIMARY KEY AUTOINCREMENT,\" +\r\n                \"tentaikhoan TEXT,\" +\r\n                \"ngaydat TEXT,\" +\r\n                \"FOREIGN KEY(tentaikhoan) REFERENCES taikhoan(tentaikhoan))\";\r\n        db.execSQL(hoadon);\r\n\r\n        // Tạo bảng Chi tiết hóa đơn\r\n        String chitiethoadon = \"CREATE TABLE chitiethoadon(\" +\r\n                \"idcthoadon INTEGER PRIMARY KEY AUTOINCREMENT,\" +\r\n                \"mahoadon INTEGER,\" +\r\n                \"maphim INTEGER,\" +\r\n                \"soluong INTEGER,\" +\r\n                \"thanhtien INTEGER,\" +\r\n                \"FOREIGN KEY(mahoadon) REFERENCES hoadon(idhoadon),\" +\r\n                \"FOREIGN KEY(maphim) REFERENCES phim(maphim))\";\r\n        db.execSQL(chitiethoadon);\r\n\r\n        // Kiểm tra xem có tài khoản admin trong cơ sở dữ liệu hay không\r\n        Cursor cursor = db.rawQuery(\"SELECT * FROM taikhoan WHERE quyen = ?\", new String[]{\"admin\"});\r\n\r\n        if (cursor.getCount() == 0) {\r\n            // Nếu không có, thêm một tài khoản admin mặc định\r\n            ContentValues values = new ContentValues();\r\n            values.put(\"tentaikhoan\", \"admin\");\r\n            values.put(\"matkhau\", \"admin\"); // Bạn nên sử dụng mã hóa mật khẩu trong thực tế\r\n            values.put(\"quyen\", \"admin\");\r\n            values.put(\"ngaytao\", \"27/03/2024\"); // Ngày tạo tài khoản\r\n            db.insert(\"taikhoan\", null, values);\r\n        }\r\n        cursor.close();\r\n    }\r\n\r\n    @Override\r\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\r\n        // Drop các bảng cũ nếu tồn tại\r\n        db.execSQL(\"DROP TABLE IF EXISTS taikhoan\");\r\n        db.execSQL(\"DROP TABLE IF EXISTS theloai\");\r\n        db.execSQL(\"DROP TABLE IF EXISTS phim\");\r\n        db.execSQL(\"DROP TABLE IF EXISTS danhsachyeuthich\");\r\n        db.execSQL(\"DROP TABLE IF EXISTS hoadon\");\r\n        db.execSQL(\"DROP TABLE IF EXISTS chitiethoadon\");\r\n\r\n        // Tạo lại các bảng mới\r\n        onCreate(db);\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/android_ck/DBHelper.java b/app/src/main/java/com/example/android_ck/DBHelper.java
--- a/app/src/main/java/com/example/android_ck/DBHelper.java	
+++ b/app/src/main/java/com/example/android_ck/DBHelper.java	
@@ -104,4 +104,39 @@
         // Tạo lại các bảng mới
         onCreate(db);
     }
+
+    public void themDanhSachYeuThich(String tentaikhoan, String maphim){
+        SQLiteDatabase db = this.getWritableDatabase();
+        ContentValues cv = new ContentValues();
+
+        cv.put("tentaikhoan", tentaikhoan);
+        cv.put("maphim", maphim);
+        long result = db.insert("danhsachyeuthich", null, cv);
+        if(result==-1){
+            Toast.makeText(context, "Failed", Toast.LENGTH_SHORT).show();
+        }else{
+            Toast.makeText(context, "Added successfully!", Toast.LENGTH_SHORT).show();
+        }
+    }
+
+    public void xoaDanhSachYeuThich(Integer id){
+        SQLiteDatabase db = this.getWritableDatabase();
+        long result = db.delete("danhsachyeuthich", "iddansach=?", new String[]{String.valueOf(id)});
+        if(result == -1){
+            Toast.makeText(context, "Failed to delete", Toast.LENGTH_SHORT).show();
+        }else{
+            Toast.makeText(context, "Deleted Successfully", Toast.LENGTH_SHORT).show();
+        }
+    }
+
+    public Cursor layDuLieuBangDSYT(){
+//        String query = "SELECT * FROM danhsachyeuthich dsyt INNER JOIN phim p WHERE dsyt.maphim=p.maphim";
+        String query = "SELECT * FROM danhsachyeuthich";
+        SQLiteDatabase db = this.getReadableDatabase();
+        Cursor cursor = null;
+        if(db!=null){
+            cursor = db.rawQuery(query, null);
+        }
+        return cursor;
+    }
 }
Index: app/src/main/res/layout/item_khachhang_yeuthich.xml
===================================================================
diff --git a/app/src/main/res/layout/item_khachhang_yeuthich.xml b/app/src/main/res/layout/item_khachhang_yeuthich.xml
deleted file mode 100644
--- a/app/src/main/res/layout/item_khachhang_yeuthich.xml	
+++ /dev/null	
@@ -1,6 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
-    android:layout_width="match_parent"
-    android:layout_height="match_parent">
-
-</androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
Index: .idea/misc.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"ExternalStorageConfigurationManager\" enabled=\"true\" />\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_17\" default=\"true\" project-jdk-name=\"jbr-17\" project-jdk-type=\"JavaSDK\">\r\n    <output url=\"file://$PROJECT_DIR$/build/classes\" />\r\n  </component>\r\n  <component name=\"ProjectType\">\r\n    <option name=\"id\" value=\"Android\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/misc.xml b/.idea/misc.xml
--- a/.idea/misc.xml	
+++ b/.idea/misc.xml	
@@ -1,4 +1,3 @@
-<?xml version="1.0" encoding="UTF-8"?>
 <project version="4">
   <component name="ExternalStorageConfigurationManager" enabled="true" />
   <component name="ProjectRootManager" version="2" languageLevel="JDK_17" default="true" project-jdk-name="jbr-17" project-jdk-type="JavaSDK">
Index: app/src/main/res/layout/fragment_khachhang_yeuthich.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"@color/main_background\">\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:background=\"@drawable/gradient_color_background\"\r\n        android:orientation=\"vertical\">\r\n\r\n        <TextView\r\n            android:id=\"@+id/textView\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"94dp\"\r\n            android:text=\"Yêu thích\"\r\n            android:textColor=\"@color/white\"\r\n            android:textSize=\"30sp\"\r\n            android:gravity=\"center\"\r\n            />\r\n    </LinearLayout>\r\n</RelativeLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/fragment_khachhang_yeuthich.xml b/app/src/main/res/layout/fragment_khachhang_yeuthich.xml
--- a/app/src/main/res/layout/fragment_khachhang_yeuthich.xml	
+++ b/app/src/main/res/layout/fragment_khachhang_yeuthich.xml	
@@ -1,23 +1,43 @@
 <?xml version="1.0" encoding="utf-8"?>
-<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
+<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:app="http://schemas.android.com/apk/res-auto"
+    xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:background="@color/main_background">
 
-    <LinearLayout
-        android:layout_width="match_parent"
-        android:layout_height="match_parent"
-        android:background="@drawable/gradient_color_background"
-        android:orientation="vertical">
-
-        <TextView
-            android:id="@+id/textView"
-            android:layout_width="match_parent"
-            android:layout_height="94dp"
-            android:text="Yêu thích"
-            android:textColor="@color/white"
-            android:textSize="30sp"
-            android:gravity="center"
-            />
-    </LinearLayout>
-</RelativeLayout>
\ No newline at end of file
+    <TextView
+        android:id="@+id/textView"
+        android:layout_width="match_parent"
+        android:layout_height="50dp"
+        android:gravity="center"
+        android:text="Danh sách yêu thích"
+        android:textColor="@color/white"
+        android:textSize="24sp"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toTopOf="parent" />
+
+    <androidx.recyclerview.widget.RecyclerView
+        android:id="@+id/recyclerView"
+        android:layout_width="match_parent"
+        android:layout_height="match_parent"
+        android:layout_above="@+id/textView"
+        android:layout_below="@+id/textView"
+        android:layout_marginTop="52dp"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toBottomOf="@+id/textView" />
+
+    <com.google.android.material.floatingactionbutton.FloatingActionButton
+        android:id="@+id/add_list_button"
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        android:layout_marginEnd="28dp"
+        android:layout_marginBottom="32dp"
+        android:clickable="true"
+        app:layout_constraintBottom_toBottomOf="parent"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:srcCompat="@android:drawable/ic_menu_add" />
+
+</androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
Index: app/src/main/AndroidManifest.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\">\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:dataExtractionRules=\"@xml/data_extraction_rules\"\r\n        android:fullBackupContent=\"@xml/backup_rules\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher_round\"\r\n        android:supportsRtl=\"true\"\r\n        android:theme=\"@style/Theme.Android_CK\"\r\n        tools:targetApi=\"31\">\r\n        <activity\r\n            android:name=\".quanly.MainActivity_quanly\"\r\n            android:exported=\"false\" />\r\n        <activity\r\n\r\n            android:name=\".khachhang.MainActivity_khachhang\"\r\n            android:exported=\"true\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n    </application>\r\n\r\n</manifest>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/AndroidManifest.xml b/app/src/main/AndroidManifest.xml
--- a/app/src/main/AndroidManifest.xml	
+++ b/app/src/main/AndroidManifest.xml	
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:tools="http://schemas.android.com/tools">
-
+    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
     <application
         android:allowBackup="true"
         android:dataExtractionRules="@xml/data_extraction_rules"
@@ -12,11 +12,13 @@
         android:supportsRtl="true"
         android:theme="@style/Theme.Android_CK"
         tools:targetApi="31">
+        <activity
+            android:name=".khachhang.AddActivity"
+            android:exported="false" />
         <activity
             android:name=".quanly.MainActivity_quanly"
             android:exported="false" />
         <activity
-
             android:name=".khachhang.MainActivity_khachhang"
             android:exported="true">
             <intent-filter>
Index: build.gradle.kts
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\nplugins {\r\n    id(\"com.android.application\") version \"8.2.2\" apply false\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/build.gradle.kts b/build.gradle.kts
--- a/build.gradle.kts	
+++ b/build.gradle.kts	
@@ -1,4 +1,4 @@
 // Top-level build file where you can add configuration options common to all sub-projects/modules.
 plugins {
-    id("com.android.application") version "8.2.2" apply false
+    id("com.android.application") version "8.3.1" apply false
 }
\ No newline at end of file
Index: gradle/wrapper/gradle-wrapper.properties
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>#Sat Mar 30 03:21:26 ICT 2024\r\ndistributionBase=GRADLE_USER_HOME\r\ndistributionPath=wrapper/dists\r\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-8.2-bin.zip\r\nzipStoreBase=GRADLE_USER_HOME\r\nzipStorePath=wrapper/dists\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>ISO-8859-1
===================================================================
diff --git a/gradle/wrapper/gradle-wrapper.properties b/gradle/wrapper/gradle-wrapper.properties
--- a/gradle/wrapper/gradle-wrapper.properties	
+++ b/gradle/wrapper/gradle-wrapper.properties	
@@ -1,6 +1,6 @@
 #Sat Mar 30 03:21:26 ICT 2024
 distributionBase=GRADLE_USER_HOME
 distributionPath=wrapper/dists
-distributionUrl=https\://services.gradle.org/distributions/gradle-8.2-bin.zip
+distributionUrl=https\://services.gradle.org/distributions/gradle-8.4-bin.zip
 zipStoreBase=GRADLE_USER_HOME
 zipStorePath=wrapper/dists
